webpackJsonp([17],{"2SDX":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("Dd8w"),s=a.n(o),i=(a("Au9i"),a("NYxO")),n=a("gyMJ"),r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ul",{class:{authenticationList:e.authenticationListDatas.length>2,authenticationListFloat:e.authenticationListDatas.length<3}},e._l(e.authenticationListDatas,function(t,o){return a("li",{key:o},[a("img",{attrs:{src:t._icon}}),e._v(" "),a("span",[e._v(e._s(t.name))])])}))])},staticRenderFns:[]};var l={data:function(){return{mformDatas:[{message:"请正确输入姓名",description:"姓名：",placeholder:"请输入姓名",name:"userName",model:"",reg:/^[\u4e00-\u9fa5]{1,}$/,regular:/^[\u4e00-\u9fa5]{1,}$/,maxlength:"15"},{message:"请正确输入身份证号",description:"身份证号：",placeholder:"请输入身份证号",name:"IDnumber",model:"",reg:/^[0-9xX]{0,18}$/,regular:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,maxlength:"18"},{message:"请正确输入手机号",description:"手机号：",placeholder:"请输入手机号",name:"phoneNum",model:"",reg:/^[0-9]{0,11}$/,regular:/^((1[3,5,8][0-9])|(14[5,7])|(17[0,6,7,8])|(19[7]))\d{8}$/,maxlength:"11"},{message:"请正确输入您的验证码",description:"验证码：",placeholder:"请输入验证码",name:"authCode",model:"",purposeList:!1,sendMsg:!0,units:"获取验证码",reg:/^\d{1,}$/,regular:/^\d{4}$/,errorColor:!1,maxlength:4}],FooterShow:!0,winHeight:document.body.clientHeight,num:0}},components:{authenticationList:a("VU/8")({props:["authenticationListDatas"],data:function(){return{}},components:{},computed:{},mounted:function(){},methods:{}},r,!1,function(e){a("kVpM")},null,null).exports},computed:s()({},Object(i.c)(["productDetailsPageData","lastOrderInfo"])),watch:{},created:function(){var e=this;this.$store.dispatch("getDetailedFor",{id:this.$route.query.id}),this.$store.dispatch("getLastOrderInfo").then(function(){e.lastOrderInfo&&(e.__findModel("userName").model=e.lastOrderInfo.name,e.__findModel("IDnumber").model=e.lastOrderInfo.idCard,e.__findModel("phoneNum").model=e.lastOrderInfo.mobilePhone)})},mounted:function(){},updated:function(){var e=this;window.onresize=function(t){var a=document.body.clientHeight;e.winHeight-a>140?e.FooterShow=!1:e.FooterShow=!0}},methods:{setTime:function(){var e=this;this.num=60;var t=setInterval(function(){e.num--,0===e.num||e.num<0?(e.__findModel("authCode").units="获取验证码",e.num=0,clearInterval(t)):e.__findModel("authCode").units=e.num+"s后重发"},1e3)},sendMsg:function(){var e=this;""!==this.__findModel("phoneNum").model?this.__findModel("phoneNum").regular.test(this.__findModel("phoneNum").model)?this.num>0?this.MessageBox.alert("请60秒后在请求验证码","提示",{closeOnClickModal:!0}):this.$store.dispatch("postSendMsg",{code:"SMS_123669047",mobilePhone:this.__findModel("phoneNum").model,smsSign:"掌金超"}).then(function(t){t.success?(e.MessageBox.alert("短信验证码已发送，有效时间5分钟","提示",{closeOnClickModal:!0}),e.setTime()):e.MessageBox.alert(t.message,"提交失败",{closeOnClickModal:!0})}):this.MessageBox.alert("请正确输入手机号","提示",{closeOnClickModal:!0}):this.MessageBox.alert("请输入手机号","提示",{closeOnClickModal:!0})},__findModel:function(e){return this.mformDatas.find(function(t){return t.name==e})},applyFor:function(){for(var e=this,t=this,a=0;a<this.mformDatas.length;a++){var o=this.mformDatas[a];if(""===o.model)return void this.MessageBox({title:"提交失败",message:o.placeholder,showCancelButton:!1});if(!o.regular.test(o.model))return void this.MessageBox({title:"提交失败",message:o.message,showCancelButton:!1})}this.$store.commit("AWAITTRUE");var s={mobilePhone:t.__findModel("phoneNum").model,idCard:t.__findModel("IDnumber").model,name:t.__findModel("userName").model,verifyCode:t.__findModel("authCode").model,product:t.productDetailsPageData.id,source:"OfficialAccounts"},i=this.apiPrefix+"api/LoanOrder/SpeedOrderRecordForApp";this.$store.dispatch("getIdentify2Auth",{realName:t.__findModel("userName").model,idCard:t.__findModel("IDnumber").model}).then(function(t){t.data.isSame?Object(n.H)(i,s).then(function(t){e.$store.commit("AWAITFALSE"),t.success?window.location.href=t.data.url:e.MessageBox({title:"提交失败",message:t.message,showCancelButton:!1})}):(e.$store.commit("AWAITFALSE"),e.MessageBox.alert(t.message,"提交失败",{closeOnClickModal:!0}))})},isFooter:function(){this.FooterShow=!1},loseFocus:function(){this.FooterShow=!0},goodInput:function(e,t,a){if(!e.test(t))for(var o=0;o<this.mformDatas.length;o++)this.mformDatas[a].model=""}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.productDetailsPageData?a("div",[a("scroll",[e.productDetailsPageData?a("div",[a("header",{staticClass:"productDetailsHeader"},[a("div",{staticClass:"imgWrap"},[a("img",{attrs:{src:e.productDetailsPageData.basic._logo}})]),e._v(" "),a("div",{staticClass:"describe"},[a("div",{staticClass:"productTitle"},[e._v(e._s(e.productDetailsPageData.basic.name))]),e._v(" "),a("div",{staticClass:"limit"},[e._v("\n            额度范围:"+e._s(e.productDetailsPageData.filter.amount_min+"-"+e.productDetailsPageData.filter.amount_max)+"\n          ")]),e._v(" "),a("div",{staticClass:"lightspot"},[e._v(e._s(e.productDetailsPageData.summary))])])]),e._v(" "),a("div",{staticClass:"productDetailContent"},[a("headline",{attrs:{headlineData:{title:"申请条件",line:!0}}}),e._v(" "),a("div",{staticClass:"applyForCondition"},[a("ul",{staticClass:"applyForList"},e._l(e.productDetailsPageData.filter.applicationConditions.split("\n"),function(t,o){return a("li",{key:o},[a("span",[e._v(e._s(t))])])}))]),e._v(" "),a("headline",{attrs:{headlineData:{title:"认证材料",line:!0}}}),e._v(" "),a("authenticationList",{attrs:{authenticationListDatas:e.productDetailsPageData.attachment}}),e._v(" "),a("ul",{staticClass:"mform"},e._l(e.mformDatas,function(t,o){return a("li",{key:o},[a("span",{staticClass:"description"},[e._v(e._s(t.description))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"mformData.model"}],attrs:{type:"text",placeholder:t.placeholder,maxlength:t.maxlength,name:t.name},domProps:{value:t.model},on:{blur:function(t){e.loseFocus()},input:[function(a){a.target.composing||e.$set(t,"model",a.target.value)},function(a){e.goodInput(t.reg,t.model,o)}],focus:e.isFooter}}),e._v(" "),t.sendMsg&&t.units?a("a",{class:{sendMsg:t.sendMsg,color:!e.num},attrs:{href:"javascript:;"},on:{click:function(t){e.sendMsg()}}},[e._v("\n              "+e._s(t.units)+"\n            ")]):e._e()])}))],1),e._v(" "),a("footer",{staticClass:"occupiedFooter"})]):e._e()]),e._v(" "),a("footer",{directives:[{name:"show",rawName:"v-show",value:e.FooterShow,expression:"FooterShow"}],staticClass:"productDetailsFooter",on:{click:e.applyFor}},[a("a",{attrs:{href:"javascript:"}},[e._v("\n      立即申请\n    ")])])],1):e._e()},staticRenderFns:[]};var c=a("VU/8")(l,d,!1,function(e){a("3tRi")},null,null);t.default=c.exports},"3tRi":function(e,t){},kVpM:function(e,t){}});
//# sourceMappingURL=17.b7394c01f59fc1354d42.js.map